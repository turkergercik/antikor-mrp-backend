{
  "kind": "collectionType",
  "collectionName": "batches",
  "info": {
    "singularName": "batch",
    "pluralName": "batches",
    "displayName": "Production Batch",
    "description": "Manufacturing batch tracking"
  },
  "options": {
    "draftAndPublish": false
  },
  "pluginOptions": {},
  "attributes": {
    "batchNumber": {
      "type": "string",
      "required": true,
      "unique": true
    },
    "recipe": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::recipe.recipe"
    },
    "quantity": {
      "type": "decimal",
      "required": true
    },
    "unit": {
      "type": "enumeration",
      "enum": ["liter", "kg", "piece"],
      "default": "liter"
    },
    "batchStatus": {
      "type": "enumeration",
      "enum": ["planned", "in_progress", "completed", "quality_check", "approved", "rejected", "shipped"],
      "default": "planned",
      "required": true
    },
    "productionDate": {
      "type": "datetime",
      "required": true
    },
    "expiryDate": {
      "type": "date"
    },
    "totalCost": {
      "type": "decimal",
      "default": 0
    },
    "orderCreatedBy": {
      "type": "string"
    },
    "orderCreatedAt": {
      "type": "string"
    },
    "productionStartedBy": {
      "type": "string"
    },
    "productionStartedAt": {
      "type": "datetime"
    },
    "productionCompletedBy": {
      "type": "string"
    },
    "productionCompletedAt": {
      "type": "datetime"
    },
    "qualityCheckedBy": {
      "type": "string"
    },
    "qualityCheckedAt": {
      "type": "datetime"
    },
    "qualityCheckResult": {
      "type": "enumeration",
      "enum": ["pending", "passed", "failed"],
      "default": "pending"
    },
    "qualityCheckNotes": {
      "type": "text"
    },
    "actualQuantity": {
      "type": "decimal",
      "default": 0,
      "required": true
    },
    "wastage": {
      "type": "decimal",
      "default": 0,
      "required": true
    },
    "shippedBy": {
      "type": "string"
    },
    "shippedAt": {
      "type": "datetime"
    },
    "trackingNumber": {
      "type": "string"
    },
    "cargoCompany": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "api::cargo-company.cargo-company"
    },
    "shipmentStatus": {
      "type": "enumeration",
      "enum": ["yolda", "dagitimda", "teslim_edildi", "bulunamadi"],
      "default": "yolda"
    },
    "notes": {
      "type": "text"
    },
    "rawMaterialLots": {
      "type": "json"
    },
    "ingredientsUsed": {
      "type": "component",
      "repeatable": true,
      "component": "recipe.ingredient"
    }
  }
}
